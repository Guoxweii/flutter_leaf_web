import{p as U,j as q,f as e,l as S,t as D,am as J,Y as m,v as K,x as C,ax as Q,ay as X,G as Z,al as aa,a6 as F,a7 as ra,F as ea,a2 as la,q as ta,a8 as sa,__tla as ia}from"./main-_r7r4w26.bundle.js";import{a as A,k as na,n as oa,j as H,d as ua,f as ca,i as va,__tla as da}from"./index-CC0sKm_d.bundle.js";import{m as ga,I as ma,M as h,__tla as pa}from"./index-BrHciPqh.bundle.js";let M,_a=Promise.all([(()=>{try{return ia}catch(p){}})(),(()=>{try{return da}catch(p){}})(),(()=>{try{return pa}catch(p){}})()]).then(async()=>{function p(a){return{aspectStyles:S(()=>{const c=Number(a.aspectRatio);return c?{paddingBottom:String(1/c*100)+"%"}:void 0})}}let b,z,I;b=U({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...A(),...na()},"VResponsive"),z=q()({name:"VResponsive",props:b(),setup(a,c){let{slots:o}=c;const{aspectStyles:n}=p(a),{dimensionStyles:j}=oa(a);return H(()=>{var _;return e("div",{class:["v-responsive",{"v-responsive--inline":a.inline},a.class],style:[j.value,a.style]},[e("div",{class:"v-responsive__sizer",style:n.value},null),(_=o.additional)==null?void 0:_.call(o),o.default&&e("div",{class:["v-responsive__content",a.contentClass]},[o.default()])])}),{}}}),I=U({alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...b(),...A(),...ua(),...ga()},"VImg"),M=q()({name:"VImg",directives:{intersect:ma},props:I(),emits:{loadstart:a=>!0,load:a=>!0,error:a=>!0},setup(a,c){let{emit:o,slots:n}=c;const{backgroundColorClasses:j,backgroundColorStyles:_}=ca(D(a,"color")),{roundedClasses:O}=va(a),f=J("VImg"),V=m(""),s=K(),t=m(a.eager?"loading":"idle"),v=m(),y=m(),i=S(()=>a.src&&typeof a.src=="object"?{src:a.src.src,srcset:a.srcset||a.src.srcset,lazySrc:a.lazySrc||a.src.lazySrc,aspect:Number(a.aspectRatio||a.src.aspect||0)}:{src:a.src,srcset:a.srcset,lazySrc:a.lazySrc,aspect:Number(a.aspectRatio||0)}),d=S(()=>i.value.aspect||v.value/y.value||0);C(()=>a.src,()=>{R(t.value!=="idle")}),C(d,(r,l)=>{!r&&l&&s.value&&g(s.value)}),Q(()=>R());function R(r){if(!(a.eager&&r)&&!(X&&!r&&!a.eager)){if(t.value="loading",i.value.lazySrc){const l=new Image;l.src=i.value.lazySrc,g(l,null)}i.value.src&&Z(()=>{var l;o("loadstart",((l=s.value)==null?void 0:l.currentSrc)||i.value.src),setTimeout(()=>{var u;if(!f.isUnmounted)if((u=s.value)!=null&&u.complete){if(s.value.naturalWidth||W(),t.value==="error")return;d.value||g(s.value,null),t.value==="loading"&&B()}else d.value||g(s.value),k()})})}}function B(){var r;f.isUnmounted||(k(),g(s.value),t.value="loaded",o("load",((r=s.value)==null?void 0:r.currentSrc)||i.value.src))}function W(){var r;f.isUnmounted||(t.value="error",o("error",((r=s.value)==null?void 0:r.currentSrc)||i.value.src))}function k(){const r=s.value;r&&(V.value=r.currentSrc||r.src)}let w=-1;aa(()=>{clearTimeout(w)});function g(r){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const u=()=>{if(clearTimeout(w),f.isUnmounted)return;const{naturalHeight:P,naturalWidth:T}=r;P||T?(v.value=T,y.value=P):!r.complete&&t.value==="loading"&&l!=null?w=window.setTimeout(u,l):(r.currentSrc.endsWith(".svg")||r.currentSrc.startsWith("data:image/svg+xml"))&&(v.value=1,y.value=1)};u()}const x=S(()=>({"v-img__img--cover":a.cover,"v-img__img--contain":!a.cover})),E=()=>{var u;if(!i.value.src||t.value==="idle")return null;const r=e("img",{class:["v-img__img",x.value],style:{objectPosition:a.position},src:i.value.src,srcset:i.value.srcset,alt:a.alt,crossorigin:a.crossorigin,referrerpolicy:a.referrerpolicy,draggable:a.draggable,sizes:a.sizes,ref:s,onLoad:B,onError:W},null),l=(u=n.sources)==null?void 0:u.call(n);return e(h,{transition:a.transition,appear:!0},{default:()=>[F(l?e("picture",{class:"v-img__picture"},[l,r]):r,[[sa,t.value==="loaded"]])]})},G=()=>e(h,{transition:a.transition},{default:()=>[i.value.lazySrc&&t.value!=="loaded"&&e("img",{class:["v-img__img","v-img__img--preload",x.value],style:{objectPosition:a.position},src:i.value.lazySrc,alt:a.alt,crossorigin:a.crossorigin,referrerpolicy:a.referrerpolicy,draggable:a.draggable},null)]}),L=()=>n.placeholder?e(h,{transition:a.transition,appear:!0},{default:()=>[(t.value==="loading"||t.value==="error"&&!n.error)&&e("div",{class:"v-img__placeholder"},[n.placeholder()])]}):null,Y=()=>n.error?e(h,{transition:a.transition,appear:!0},{default:()=>[t.value==="error"&&e("div",{class:"v-img__error"},[n.error()])]}):null,$=()=>a.gradient?e("div",{class:"v-img__gradient",style:{backgroundImage:"linear-gradient(".concat(a.gradient,")")}},null):null,N=m(!1);{const r=C(d,l=>{l&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{N.value=!0})}),r())})}return H(()=>{const r=z.filterProps(a);return F(e(z,la({class:["v-img",{"v-img--booting":!N.value},j.value,O.value,a.class],style:[{width:ta(a.width==="auto"?v.value:a.width)},_.value,a.style]},r,{aspectRatio:d.value,"aria-label":a.alt,role:a.alt?"img":void 0}),{additional:()=>e(ea,null,[e(E,null,null),e(G,null,null),e($,null,null),e(L,null,null),e(Y,null,null)]),default:n.default}),[[ra("intersect"),{handler:R,options:a.options},null,{once:!0}]])}),{currentSrc:V,image:s,state:t,naturalWidth:v,naturalHeight:y}}})});export{M as V,_a as __tla};
